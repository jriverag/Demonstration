<!DOCTYPE html>

<html>
<head>
    <title>Category List Demonstration</title>
    <script>
function ListCat()
{
    var xmlhttp = new XMLHttpRequest();
    var url = "http://bus-pluto.ad.uab.edu/jsonwebservice/service1.svc/getAllCategories";
             
    xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var output = JSON.parse(xmlhttp.responseText);
        GenerateOutput(output);
        }
    }
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
            
    function GenerateOutput(result)
    {
        var display = "<table><tr><th>Category ID</th><th>Category Name</th><th>Category Description</th></tr>";
        var count = 0;
        var rowid = "oddrow";
       
        for(count = 0; count < result.GetAllCategoriesResult.length; count ++)
        {
            if (count%2 == 0)
            {
                rowid = "evenrow";
            }
            else
            {
                rowid = "oddrow";
            }
            display += "<tr id=" + rowid + "><td>" + result.GetAllCategoriesResult[count].CID + "</td><td>" + result.GetAllCategoriesResult[count].CName + "</td><td>" + result.GetAllCategoriesResult[count].CDescription + "</td></tr>";
        }
        display += "</table>";
        document.getElementById("listcat").innerHTML = display;
        }
}
  
    </script>
</head>

<body>
        <h3>List Categories</h3>
        <button onclick="ListCat()">List Categories</button>
        <hr>
        <p id="listcat">Category List</p>


</body>
</html>
