<!DOCTYPE html>

<html>
<head>
    <title>Change Category Description</title>
    <script>
function CatUpdate()
    {
        var xmlhttp = new XMLHttpRequest();
        var objdisplay = document.getElementById("changeresult");
        xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var result = JSON.parse(xmlhttp.responseText);
                    var outcome = result.WasSuccessful
                    var error = result.Exception;
                    OperationResult(outcome, error, objdisplay);
                }
        }    
        var url = "http://bus-pluto.ad.uab.edu/jsonwebservice/service1.svc/updateCatDescription";
        var cid = Number(document.getElementById("catID").value);
        var cdescription = document.getElementById("catdescription").value;
                
        var parameters = '{"CID":' + cid + ',"CDescription":"' + cdescription + '"}';
                
        xmlhttp.open("POST", url, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send(parameters);
    }

function OperationResult(success, exception, displayObject)
{
    switch (success)
    {
        case 1:
            displayObject.innerHTML = "The operation was successful!";
            break;
        case 0:
            displayObject.innerHTML = "The operation was not successful:<br>" + exception;
            break;
        case -2:
            displayObject.innerHTML = "The operation was not successful because the data string supplied could not be deserialized into the service object.";
            break;
        case -3:
            displayObject.innerHTML = "The operation was not successful because a record with the supplied Order ID could not be found";
            break;
        default:
            alert("The operation code returned is not identifiable.");
    }
 
}
    </script>
</head>

<body>
<h3>Change a Category Description</h3>
        <hr>
        <table>
            <tr>
                <td class="caption">
                    <label>Category ID</label>
                </td>
                <td>
                    <input type="number" id="catID">
                </td>
            </tr>
            <tr>
                <td class="caption">
                    <label>Category Description</label>
                </td>
                <td>
                    <input type="text" id="catdescription">
                </td>
            </tr>
            <tr>
                <td>
                    <button onclick="CatUpdate()" id="update">Update Category Description</button>
                </td>
            </tr>
        </table>
        <br>
        <label id="changeresult">The operation's result will display here.</label>


</body>
</html>
